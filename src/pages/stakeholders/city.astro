---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/shared/Header.astro';
import Hero from '../../components/sections/Hero.astro';
import Card from '../../components/ui/Card.astro';
import Button from '../../components/ui/Button.astro';

const pageTitle = 'ClearLane for NYC Officials - Policy Solutions That Work';
const pageDescription = 'Evidence-based policy framework that improves transit equity, generates revenue, and supports economic development across New York City.';

const policyBenefits = [
  {
    title: 'Revenue Generation',
    value: '+$180M',
    description: 'Annual increase in enforcement revenue through strategic targeting',
    impact: 'Sustainable funding for transit improvements and city services'
  },
  {
    title: 'Economic Development',
    value: '$12.3M',
    description: 'Annual economic benefit from improved educational and workforce access',
    impact: 'Enhanced competitiveness of NYC workforce and talent retention'
  },
  {
    title: 'Transit Equity',
    value: '275K+',
    description: 'NYC students with improved transit access and reliability',
    impact: 'Reduced transportation barriers to educational and economic opportunity'
  },
  {
    title: 'Administrative Efficiency',
    value: '4:1',
    description: 'Return on investment through coordinated enforcement strategy',
    impact: 'Demonstrates effective use of taxpayer resources with measurable outcomes'
  }
];

const policyFramework = [
  {
    category: 'Enforcement Reform',
    policies: [
      {
        title: 'Graduated Penalty Structure',
        description: 'Implement escalating fines: $150 (first), $300 (second), $500+ (repeat)',
        timeline: '6-12 months',
        stakeholders: ['City Council', 'DOF', 'NYPD'],
        impact: 'Stronger deterrent effect while maintaining accessibility'
      },
      {
        title: 'Peak Hour Surcharges',
        description: 'Enhanced penalties during student commute hours (7-10 AM)',
        timeline: '3-6 months',
        stakeholders: ['DOT', 'NYPD', 'Mayor\'s Office'],
        impact: 'Targeted protection of educational transportation'
      },
      {
        title: 'Commercial Vehicle Standards',
        description: 'Specific penalties for delivery and rideshare violations',
        timeline: '12-18 months',
        stakeholders: ['TLC', 'DOT', 'Business Community'],
        impact: 'Addresses major violation sources while supporting commerce'
      }
    ]
  },
  {
    category: 'Technology Integration',
    policies: [
      {
        title: 'Smart City Integration',
        description: 'Connect enforcement with broader NYC traffic management systems',
        timeline: '18-24 months',
        stakeholders: ['OTI', 'DOT', 'MTA'],
        impact: 'Holistic approach to traffic flow and transit efficiency'
      },
      {
        title: 'Public Transparency',
        description: 'Open data dashboard showing enforcement activity and outcomes',
        timeline: '6-9 months',
        stakeholders: ['OTI', 'Mayor\'s Office', 'Civic Groups'],
        impact: 'Increased accountability and public trust in enforcement'
      },
      {
        title: 'Predictive Deployment',
        description: 'AI-powered system for optimal resource allocation',
        timeline: '12-18 months',
        stakeholders: ['OTI', 'NYPD', 'Data Scientists'],
        impact: 'Maximized enforcement effectiveness with existing resources'
      }
    ]
  },
  {
    category: 'Interagency Coordination',
    policies: [
      {
        title: 'Unified Command Structure',
        description: 'Clear coordination protocols between NYPD, DOT, and MTA',
        timeline: '3-6 months',
        stakeholders: ['Mayor\'s Office', 'NYPD', 'DOT', 'MTA'],
        impact: 'Eliminated jurisdictional gaps and improved response times'
      },
      {
        title: 'Performance Metrics',
        description: 'Standardized KPIs for transit reliability and enforcement effectiveness',
        timeline: '6-12 months',
        stakeholders: ['OMB', 'Operations', 'Performance Management'],
        impact: 'Data-driven accountability and continuous improvement'
      },
      {
        title: 'Community Engagement',
        description: 'Structured input from affected communities and stakeholder groups',
        timeline: '3-6 months',
        stakeholders: ['Community Affairs', 'Borough Presidents', 'Advocacy Groups'],
        impact: 'Community buy-in and responsive policy implementation'
      }
    ]
  }
];

const constituencyImpacts = [
  {
    constituency: 'Working Families',
    population: '2.3M NYC residents',
    benefits: [
      'Reliable commute timing reduces work-life stress',
      'Improved access to educational opportunities',
      'Reduced transportation costs through better service'
    ],
    priority: 'Very High'
  },
  {
    constituency: 'Students',
    population: '275K affected students',
    benefits: [
      'Protected study time during commutes',
      'Improved class attendance and academic outcomes',
      'Enhanced access to campus resources and activities'
    ],
    priority: 'Very High'
  },
  {
    constituency: 'Seniors & Disabled',
    population: '850K vulnerable riders',
    benefits: [
      'More predictable travel for medical appointments',
      'Reduced physical stress from long waits',
      'Improved access to essential services'
    ],
    priority: 'High'
  },
  {
    constituency: 'Local Businesses',
    population: '240K small businesses',
    benefits: [
      'Improved employee punctuality and reliability',
      'Better customer access via public transit',
      'Reduced delivery conflicts through targeted enforcement'
    ],
    priority: 'High'
  },
  {
    constituency: 'Outer Borough Communities',
    population: '4.1M residents',
    benefits: [
      'Enhanced connectivity to Manhattan job centers',
      'Improved access to cultural and educational resources',
      'Recognition of transportation equity needs'
    ],
    priority: 'Very High'
  }
];

const budgetAnalysis = {
  implementation_costs: {
    year_1: '$2.5M',
    year_2: '$3.2M',
    year_3: '$1.8M',
    total: '$7.5M'
  },
  revenue_projections: {
    year_1: '$8.2M',
    year_2: '$15.6M',
    year_3: '$23.4M',
    five_year_total: '$89.3M'
  },
  net_benefit: {
    year_1: '$5.7M',
    year_2: '$12.4M',
    year_3: '$21.6M',
    five_year_total: '$81.8M'
  },
  roi_timeline: '8 months to break-even'
};
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  keywords="NYC policy, transit enforcement, revenue generation, interagency coordination, transit equity"
>
  <Header currentPath="/stakeholders/city" />

  <main id="main-content">
    <!-- Hero Section -->
    <Hero
      title="ClearLane for NYC Leadership"
      subtitle="Policy Solutions That Work"
      description="Evidence-based framework that improves transit equity, generates sustainable revenue, and demonstrates effective governance through measurable outcomes."
      ctaText="View Policy Framework"
      ctaHref="#policy-framework"
      secondaryCtaText="Schedule Policy Briefing"
      secondaryCtaHref="/contact?stakeholder=city"
      variant="city"
      stats={[
        { value: '$180M', label: 'Revenue Potential', description: 'Annual enforcement increase' },
        { value: '275K+', label: 'Constituents Served', description: 'Students with improved access' },
        { value: '4:1', label: 'ROI Ratio', description: 'Taxpayer value delivered' }
      ]}
    >
      <div slot="visual">
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
          <h3 class="text-lg font-semibold text-white mb-4">Policy Impact Summary</h3>

          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span class="text-white/80">Annual Revenue Increase</span>
              <span class="text-blue-200 font-semibold">$180M+</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Implementation Timeline</span>
              <span class="text-blue-200 font-semibold">18 months</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Constituencies Served</span>
              <span class="text-blue-200 font-semibold">5 key groups</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Agency Coordination</span>
              <span class="text-blue-200 font-semibold">7 departments</span>
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-white/20 text-center">
            <div class="text-lg font-bold text-blue-200">Measurable results</div>
            <div class="text-sm text-white/70">Data-driven governance</div>
          </div>
        </div>
      </div>
    </Hero>

    <!-- Policy Value Proposition -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Strategic Policy Value
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            ClearLane addresses multiple city priorities simultaneously: revenue generation,
            transit equity, economic development, and effective governance.
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
          {policyBenefits.map((benefit) => (
            <Card variant="elevated" key={benefit.title} className="text-center h-full">
              <div class="text-4xl font-bold text-blue-600 mb-3">{benefit.value}</div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">{benefit.title}</h3>
              <p class="text-gray-600 mb-4 text-sm">{benefit.description}</p>
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                <div class="text-xs font-semibold text-blue-800 mb-1">Policy Impact:</div>
                <div class="text-xs text-blue-700">{benefit.impact}</div>
              </div>
            </Card>
          ))}
        </div>

        <!-- Budget Summary -->
        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-2xl p-8 border border-green-200">
          <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">
            Fiscal Impact Analysis
          </h3>
          <div class="grid md:grid-cols-3 gap-8">
            <div>
              <h4 class="text-lg font-semibold text-gray-900 mb-4">Implementation Investment</h4>
              <div class="space-y-2">
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 1</span>
                  <span class="font-bold text-red-600">{budgetAnalysis.implementation_costs.year_1}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 2</span>
                  <span class="font-bold text-red-600">{budgetAnalysis.implementation_costs.year_2}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 3</span>
                  <span class="font-bold text-red-600">{budgetAnalysis.implementation_costs.year_3}</span>
                </div>
                <div class="flex justify-between font-bold border-t pt-2">
                  <span class="text-gray-900">Total Investment</span>
                  <span class="text-red-600">{budgetAnalysis.implementation_costs.total}</span>
                </div>
              </div>
            </div>

            <div>
              <h4 class="text-lg font-semibold text-gray-900 mb-4">Revenue Generation</h4>
              <div class="space-y-2">
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 1</span>
                  <span class="font-bold text-green-600">{budgetAnalysis.revenue_projections.year_1}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 2</span>
                  <span class="font-bold text-green-600">{budgetAnalysis.revenue_projections.year_2}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 3</span>
                  <span class="font-bold text-green-600">{budgetAnalysis.revenue_projections.year_3}</span>
                </div>
                <div class="flex justify-between font-bold border-t pt-2">
                  <span class="text-gray-900">5-Year Total</span>
                  <span class="text-green-600">{budgetAnalysis.revenue_projections.five_year_total}</span>
                </div>
              </div>
            </div>

            <div>
              <h4 class="text-lg font-semibold text-gray-900 mb-4">Net Taxpayer Benefit</h4>
              <div class="space-y-2">
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 1</span>
                  <span class="font-bold text-blue-600">{budgetAnalysis.net_benefit.year_1}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 2</span>
                  <span class="font-bold text-blue-600">{budgetAnalysis.net_benefit.year_2}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Year 3</span>
                  <span class="font-bold text-blue-600">{budgetAnalysis.net_benefit.year_3}</span>
                </div>
                <div class="flex justify-between font-bold border-t pt-2">
                  <span class="text-gray-900">5-Year Net Value</span>
                  <span class="text-blue-600">{budgetAnalysis.net_benefit.five_year_total}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="text-center mt-6 pt-6 border-t border-gray-200">
            <p class="text-lg font-semibold text-gray-900">Break-even: {budgetAnalysis.roi_timeline}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Policy Framework -->
    <section id="policy-framework" class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Comprehensive Policy Framework
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Detailed implementation strategy across enforcement, technology, and coordination,
            with specific timelines and stakeholder responsibilities.
          </p>
        </div>

        <div class="space-y-12">
          {policyFramework.map((category) => (
            <div key={category.category}>
              <h3 class="text-2xl font-semibold text-gray-900 mb-8 text-center">
                {category.category}
              </h3>
              <div class="grid gap-8">
                {category.policies.map((policy) => (
                  <Card variant="elevated" key={policy.title} className="p-6">
                    <div class="grid lg:grid-cols-3 gap-6">
                      <div class="lg:col-span-2">
                        <h4 class="text-xl font-semibold text-gray-900 mb-3">{policy.title}</h4>
                        <p class="text-gray-600 mb-4">{policy.description}</p>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                          <div class="text-sm font-semibold text-green-800 mb-1">Expected Impact:</div>
                          <div class="text-sm text-green-700">{policy.impact}</div>
                        </div>
                      </div>
                      <div class="space-y-4">
                        <div>
                          <div class="text-sm font-semibold text-gray-700 mb-2">Timeline:</div>
                          <div class="text-blue-600 font-medium">{policy.timeline}</div>
                        </div>
                        <div>
                          <div class="text-sm font-semibold text-gray-700 mb-2">Key Stakeholders:</div>
                          <div class="flex flex-wrap gap-1">
                            {policy.stakeholders.map((stakeholder) => (
                              <span key={stakeholder} class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                {stakeholder}
                              </span>
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                  </Card>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Constituency Impact -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Constituency Benefits Analysis
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            ClearLane delivers measurable benefits to key NYC constituencies,
            demonstrating broad-based value and political sustainability.
          </p>
        </div>

        <div class="grid gap-8">
          {constituencyImpacts.map((constituency) => (
            <Card variant="elevated" key={constituency.constituency} className="p-6">
              <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between mb-4">
                <div>
                  <h3 class="text-xl font-semibold text-gray-900 mb-2">{constituency.constituency}</h3>
                  <p class="text-gray-600 font-medium">{constituency.population}</p>
                </div>
                <div class="mt-4 lg:mt-0">
                  <span class={`px-3 py-1 rounded-full text-sm font-semibold ${
                    constituency.priority === 'Very High' ? 'bg-red-100 text-red-800' :
                    constituency.priority === 'High' ? 'bg-orange-100 text-orange-800' :
                    'bg-yellow-100 text-yellow-800'
                  }`}>
                    {constituency.priority} Priority
                  </span>
                </div>
              </div>
              <div class="grid md:grid-cols-3 gap-4">
                {constituency.benefits.map((benefit, index) => (
                  <div key={index} class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-start">
                      <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                      <span class="text-blue-800 text-sm">{benefit}</span>
                    </div>
                  </div>
                ))}
              </div>
            </Card>
          ))}
        </div>
      </div>
    </section>

    <!-- Implementation Timeline -->
    <section class="py-16 bg-blue-900 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold mb-4">18-Month Implementation Timeline</h2>
          <p class="text-xl text-blue-200 max-w-3xl mx-auto">
            Coordinated rollout across multiple city agencies with clear milestones
            and accountability measures at each phase.
          </p>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-8">
            <h3 class="text-2xl font-semibold mb-6">Phase 1: Foundation (Months 1-6)</h3>
            <ul class="space-y-3">
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">City Council authorization and budget approval</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Interagency coordination protocols established</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Technology procurement and initial deployment</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Staff training and community outreach launch</span>
              </li>
            </ul>
          </div>

          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-8">
            <h3 class="text-2xl font-semibold mb-6">Phase 2: Scaling (Months 7-18)</h3>
            <ul class="space-y-3">
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Full network deployment across priority locations</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Smart city integration and predictive systems</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Performance measurement and optimization</span>
              </li>
              <li class="flex items-start">
                <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"></div>
                <span class="text-blue-100">Public reporting dashboard and accountability</span>
              </li>
            </ul>
          </div>
        </div>

        <div class="mt-12 text-center">
          <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 inline-block">
            <h4 class="text-lg font-semibold mb-2">Success Metrics</h4>
            <div class="grid md:grid-cols-3 gap-6">
              <div>
                <div class="text-2xl font-bold text-blue-200">40%</div>
                <div class="text-blue-100 text-sm">Violation reduction</div>
              </div>
              <div>
                <div class="text-2xl font-bold text-blue-200">$180M</div>
                <div class="text-blue-100 text-sm">Annual revenue increase</div>
              </div>
              <div>
                <div class="text-2xl font-bold text-blue-200">275K</div>
                <div class="text-blue-100 text-sm">Students with improved access</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Next Steps for City Leadership -->
    <section class="py-16 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Next Steps for City Leadership</h2>
        <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
          Ready to implement a policy solution that delivers measurable results?
          Multiple pathways to move forward with ClearLane implementation.
        </p>

        <div class="grid md:grid-cols-3 gap-8 mb-12">
          <div class="bg-blue-50 rounded-xl p-6 border border-blue-200">
            <div class="text-3xl mb-4">🏛️</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">City Council Presentation</h3>
            <p class="text-gray-600 text-sm mb-4">
              Comprehensive briefing for Transportation Committee with budget analysis and timeline
            </p>
            <Button href="/contact?request=council-presentation&stakeholder=city" variant="outline" size="sm" className="w-full">
              Schedule Presentation
            </Button>
          </div>

          <div class="bg-green-50 rounded-xl p-6 border border-green-200">
            <div class="text-3xl mb-4">💼</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Mayor's Office Briefing</h3>
            <p class="text-gray-600 text-sm mb-4">
              Executive summary focusing on revenue generation, constituent benefits, and political advantages
            </p>
            <Button href="/contact?request=executive-briefing&stakeholder=city" variant="outline" size="sm" className="w-full">
              Request Briefing
            </Button>
          </div>

          <div class="bg-purple-50 rounded-xl p-6 border border-purple-200">
            <div class="text-3xl mb-4">🤝</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Interagency Coordination</h3>
            <p class="text-gray-600 text-sm mb-4">
              Multi-department planning session with DOT, NYPD, OTI, and other key stakeholders
            </p>
            <Button href="/contact?request=interagency-coordination&stakeholder=city" variant="outline" size="sm" className="w-full">
              Coordinate Meeting
            </Button>
          </div>
        </div>

        <div class="bg-gray-50 rounded-xl p-8">
          <h3 class="text-xl font-semibold text-gray-900 mb-4">Political and Administrative Support</h3>
          <p class="text-gray-600 mb-6">
            ClearLane represents a unique opportunity to demonstrate effective, data-driven governance
            that delivers concrete benefits to constituents while generating sustainable revenue.
          </p>

          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <Button href="/policy-brief" variant="primary" size="lg">
              📋 Download Policy Brief
            </Button>
            <Button href="/deployment-simulator?view=city" variant="secondary" size="lg">
              🧮 Run Budget Scenarios
            </Button>
            <Button href="/contact" variant="outline" size="lg">
              💬 Discuss Implementation
            </Button>
          </div>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Track city stakeholder engagement
    if (typeof gtag !== 'undefined') {
      gtag('event', 'stakeholder_page_view', {
        stakeholder: 'city',
        engagement_type: 'policy_focused_content',
        content_focus: 'governance_benefits'
      });
    }

    // Track policy framework section engagement
    const policyFrameworkSection = document.getElementById('policy-framework');
    if (policyFrameworkSection) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && typeof gtag !== 'undefined') {
            gtag('event', 'policy_framework_view', {
              stakeholder: 'city',
              engagement_depth: 'detailed_policy_review',
              scroll_depth: 'policy_framework_section'
            });
          }
        });
      }, { threshold: 0.3 });

      observer.observe(policyFrameworkSection);
    }

    // Track constituency impact interactions
    const constituencyCards = document.querySelectorAll('[data-constituency]');
    constituencyCards.forEach(card => {
      card.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'constituency_analysis_view', {
            stakeholder: 'city',
            constituency: card.dataset.constituency,
            engagement_type: 'voter_impact_interest'
          });
        }
      });
    });

    // Track budget analysis engagement
    const budgetSection = document.querySelector('.fiscal-impact');
    if (budgetSection) {
      budgetSection.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'budget_analysis_interest', {
            stakeholder: 'city',
            engagement_type: 'fiscal_planning',
            content_focus: 'revenue_generation'
          });
        }
      });
    }

    // Track implementation timeline interest
    const timelineCards = document.querySelectorAll('[data-timeline-phase]');
    timelineCards.forEach((card, index) => {
      card.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'implementation_timeline_interest', {
            stakeholder: 'city',
            phase: index + 1,
            engagement_depth: 'detailed_planning'
          });
        }
      });
    });

    // Track next steps CTA engagement
    const nextStepButtons = document.querySelectorAll('[href*="request="]');
    nextStepButtons.forEach(button => {
      button.addEventListener('click', () => {
        const requestType = new URL(button.href).searchParams.get('request');
        if (typeof gtag !== 'undefined') {
          gtag('event', 'city_official_next_step', {
            stakeholder: 'city',
            request_type: requestType,
            conversion_intent: 'high',
            engagement_level: 'ready_to_implement'
          });
        }
      });
    });
  });
</script>

<style>
  /* City official styling */
  .hero.variant-city {
    background: linear-gradient(135deg, #1e40af 0%, #7c3aed 100%);
  }

  /* Enhanced constituency cards */
  .constituency-card {
    transition: all 0.3s ease;
  }

  .constituency-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  }

  /* Policy framework styling */
  .policy-framework-item {
    border-left: 4px solid #3b82f6;
    transition: border-color 0.3s ease;
  }

  .policy-framework-item:hover {
    border-color: #1d4ed8;
  }

  /* Budget analysis table styling */
  .budget-table td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e5e7eb;
  }

  .budget-table .total-row {
    background-color: #f3f4f6;
    font-weight: 600;
  }

  /* Print optimization for policy documents */
  @media print {
    .policy-framework-section {
      page-break-inside: avoid;
    }

    .constituency-analysis {
      page-break-inside: avoid;
      margin-bottom: 1rem;
    }

    .budget-analysis {
      page-break-inside: avoid;
    }

    .timeline-phase {
      page-break-inside: avoid;
    }
  }
</style>