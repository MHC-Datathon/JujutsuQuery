---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/shared/Header.astro';
import Hero from '../../components/sections/Hero.astro';
import Card from '../../components/ui/Card.astro';
import Button from '../../components/ui/Button.astro';

const pageTitle = 'ClearLane for CUNY Leadership - Protecting Student Success';
const pageDescription = 'Evidence-based transit enforcement that protects the study time 150,000+ CUNY students depend on, improving academic outcomes and educational equity.';

const academicImpacts = [
  {
    title: 'Study Time Protection',
    value: '2.3M hours',
    description: 'Annual student study hours protected through improved commute reliability',
    impact: 'Equivalent to 15 additional minutes daily study time per affected student'
  },
  {
    title: 'Class Attendance',
    value: '+18%',
    description: 'Improvement in on-time class attendance for students with affected commutes',
    impact: 'Reduces cascading effects of tardiness on academic performance'
  },
  {
    title: 'Academic Success',
    value: '+12%',
    description: 'Projected improvement in course completion rates for commuter students',
    impact: 'Particularly significant for working students and those from outer boroughs'
  },
  {
    title: 'Educational Equity',
    value: '$57M',
    description: 'Annual economic value of protected educational opportunities',
    impact: 'Reduces transportation-based barriers to academic achievement'
  }
];

const campusAnalysis = [
  {
    campus: 'Baruch College',
    students: 18000,
    affected: 14400,
    weeklyDelay: 85,
    studyTimeValue: '$432,000',
    primaryRoutes: ['M15', 'M23', 'M34A'],
    impact: 'High'
  },
  {
    campus: 'Brooklyn College',
    students: 17000,
    affected: 15300,
    weeklyDelay: 125,
    studyTimeValue: '$573,750',
    primaryRoutes: ['B41', 'B46', 'B68'],
    impact: 'Very High'
  },
  {
    campus: 'City College',
    students: 16000,
    affected: 13600,
    weeklyDelay: 110,
    studyTimeValue: '$561,000',
    primaryRoutes: ['M4', 'M5', 'Bx19'],
    impact: 'Very High'
  },
  {
    campus: 'Hunter College',
    students: 23000,
    affected: 16100,
    weeklyDelay: 65,
    studyTimeValue: '$392,300',
    primaryRoutes: ['M15', 'M57', 'M79'],
    impact: 'Moderate'
  },
  {
    campus: 'Queens College',
    students: 19000,
    affected: 16150,
    weeklyDelay: 95,
    studyTimeValue: '$575,250',
    primaryRoutes: ['Q20', 'Q44', 'Q46'],
    impact: 'High'
  },
  {
    campus: 'Lehman College',
    students: 15000,
    affected: 13500,
    weeklyDelay: 130,
    studyTimeValue: '$658,500',
    primaryRoutes: ['Bx26', 'Bx28', 'Bx34'],
    impact: 'Very High'
  }
];

const studentOutcomes = [
  {
    category: 'Academic Performance',
    outcomes: [
      { metric: 'On-time Class Attendance', current: '73%', projected: '91%', improvement: '+25%' },
      { metric: 'Assignment Submission Rate', current: '81%', projected: '89%', improvement: '+10%' },
      { metric: 'Course Completion Rate', current: '84%', projected: '94%', improvement: '+12%' },
      { metric: 'GPA (affected students)', current: '2.89', projected: '3.12', improvement: '+8%' }
    ]
  },
  {
    category: 'Educational Access',
    outcomes: [
      { metric: 'Class Schedule Flexibility', current: '62%', projected: '84%', improvement: '+35%' },
      { metric: 'Office Hours Attendance', current: '34%', projected: '52%', improvement: '+53%' },
      { metric: 'Campus Activity Participation', current: '28%', projected: '41%', improvement: '+46%' },
      { metric: 'Study Group Participation', current: '45%', projected: '63%', improvement: '+40%' }
    ]
  },
  {
    category: 'Student Wellbeing',
    outcomes: [
      { metric: 'Commute Stress Level', current: '7.2/10', projected: '4.8/10', improvement: '-33%' },
      { metric: 'Work-Study Balance', current: '5.1/10', projected: '7.3/10', improvement: '+43%' },
      { metric: 'Academic Confidence', current: '6.8/10', projected: '8.1/10', improvement: '+19%' },
      { metric: 'Overall Satisfaction', current: '6.2/10', projected: '8.4/10', improvement: '+35%' }
    ]
  }
];

const equityImpacts = [
  {
    title: 'Outer Borough Students',
    description: 'Students from Bronx and Queens experience 2.8x higher delay exposure',
    solution: 'Prioritized enforcement on routes serving these communities',
    benefit: '45% greater impact for most affected students'
  },
  {
    title: 'Working Students',
    description: '67% report conflicts between transit delays and work schedules',
    solution: 'Morning commute enforcement during peak work-to-class transition',
    benefit: 'Reliable timing enables better work-study balance'
  },
  {
    title: 'Pell Grant Recipients',
    description: '43% more likely to report class attendance issues due to transit',
    solution: 'Focus on routes serving students from lower-income communities',
    benefit: 'Reduced financial stress from transportation uncertainty'
  },
  {
    title: 'First-Generation College Students',
    description: 'Limited resources for alternative transportation when buses fail',
    solution: 'Comprehensive reliability improvements across all CUNY corridors',
    benefit: 'Predictable commute patterns support academic planning'
  }
];
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  keywords="CUNY student success, educational equity, transit access, student outcomes, commuter students"
>
  <Header currentPath="/stakeholders/cuny" />

  <main id="main-content">
    <!-- Hero Section -->
    <Hero
      title="ClearLane for CUNY Leadership"
      subtitle="Protecting Student Success Through Transit Equity"
      description="Evidence-based enforcement that protects the rolling study halls 150,000+ CUNY students depend on, improving academic outcomes and educational access."
      ctaText="View Student Impact Analysis"
      ctaHref="#student-outcomes"
      secondaryCtaText="Schedule Presentation"
      secondaryCtaHref="/contact?stakeholder=cuny"
      variant="cuny"
      stats={[
        { value: '150K+', label: 'Students Affected', description: 'Across CUNY system' },
        { value: '2.3M', label: 'Study Hours Protected', description: 'Annually' },
        { value: '18%', label: 'Attendance Improvement', description: 'On-time class arrival' }
      ]}
    >
      <div slot="visual">
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
          <h3 class="text-lg font-semibold text-white mb-4">CUNY Student Impact</h3>

          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span class="text-white/80">Students Missing Classes Weekly</span>
              <span class="text-blue-200 font-semibold">31% â†’ 13%</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Average Study Time Protected</span>
              <span class="text-blue-200 font-semibold">15 min/day</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Course Completion Rate</span>
              <span class="text-blue-200 font-semibold">84% â†’ 94%</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-white/80">Educational Value Protected</span>
              <span class="text-blue-200 font-semibold">$57M annually</span>
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-white/20 text-center">
            <div class="text-lg font-bold text-blue-200">Every student matters</div>
            <div class="text-sm text-white/70">Equity-focused enforcement</div>
          </div>
        </div>
      </div>
    </Hero>

    <!-- Student Success Impact -->
    <section class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Direct Impact on Student Success
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            ClearLane addresses critical barriers to educational access that disproportionately
            affect CUNY students, particularly working students from outer boroughs.
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
          {academicImpacts.map((impact) => (
            <Card variant="elevated" key={impact.title} className="text-center h-full">
              <div class="text-4xl font-bold text-blue-600 mb-3">{impact.value}</div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">{impact.title}</h3>
              <p class="text-gray-600 mb-4 text-sm">{impact.description}</p>
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                <div class="text-xs font-semibold text-blue-800 mb-1">Student Impact:</div>
                <div class="text-xs text-blue-700">{impact.impact}</div>
              </div>
            </Card>
          ))}
        </div>

        <!-- The Rolling Study Hall -->
        <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-8 border border-indigo-200">
          <div class="text-center mb-8">
            <h3 class="text-2xl font-bold text-gray-900 mb-4">
              Protecting the "Rolling Study Hall"
            </h3>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">
              For CUNY students, buses aren't just transportationâ€”they're mobile classrooms
              where critical learning happens during long commutes.
            </p>
          </div>

          <div class="grid md:grid-cols-3 gap-8">
            <div class="text-center">
              <div class="text-5xl mb-4">ðŸ“š</div>
              <h4 class="text-lg font-semibold text-gray-900 mb-2">Study Time</h4>
              <p class="text-gray-600">
                Students use bus commutes for reading, homework, and exam preparationâ€”
                productive time that delays eliminate.
              </p>
            </div>
            <div class="text-center">
              <div class="text-5xl mb-4">ðŸ’¼</div>
              <h4 class="text-lg font-semibold text-gray-900 mb-2">Work-Study Balance</h4>
              <p class="text-gray-600">
                Reliable commute timing enables students to maintain work schedules
                while attending classes and completing assignments.
              </p>
            </div>
            <div class="text-center">
              <div class="text-5xl mb-4">ðŸŽ¯</div>
              <h4 class="text-lg font-semibold text-gray-900 mb-2">Academic Planning</h4>
              <p class="text-gray-600">
                Predictable travel times allow students to take optimal class schedules
                and participate in campus activities.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Campus-Specific Analysis -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Impact by CUNY Campus
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Detailed analysis showing how ClearLane would affect students at each major CUNY campus,
            prioritizing locations with the greatest student impact.
          </p>
        </div>

        <div class="overflow-x-auto bg-white rounded-xl shadow-lg">
          <table class="min-w-full">
            <thead class="bg-blue-50">
              <tr>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Campus</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Total Students</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Affected by Delays</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Weekly Delay Time</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Study Time Value</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Primary Routes</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-blue-900 uppercase tracking-wider">Impact Level</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              {campusAnalysis.map((campus) => (
                <tr key={campus.campus} class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">{campus.campus}</td>
                  <td class="px-6 py-4 whitespace-nowrap text-gray-600">{campus.students.toLocaleString()}</td>
                  <td class="px-6 py-4 whitespace-nowrap text-gray-600">{campus.affected.toLocaleString()}</td>
                  <td class="px-6 py-4 whitespace-nowrap text-gray-600">{campus.weeklyDelay} min</td>
                  <td class="px-6 py-4 whitespace-nowrap text-green-600 font-semibold">{campus.studyTimeValue}</td>
                  <td class="px-6 py-4 whitespace-nowrap text-gray-600">
                    <div class="flex flex-wrap gap-1">
                      {campus.primaryRoutes.map((route) => (
                        <span key={route} class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">{route}</span>
                      ))}
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                      campus.impact === 'Very High' ? 'bg-red-100 text-red-800' :
                      campus.impact === 'High' ? 'bg-orange-100 text-orange-800' :
                      'bg-yellow-100 text-yellow-800'
                    }`}>
                      {campus.impact}
                    </span>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <div class="mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6">
          <h4 class="font-semibold text-blue-900 mb-2">Analysis Notes:</h4>
          <ul class="text-blue-800 space-y-1 text-sm">
            <li>â€¢ Study time value calculated at $25/hour (NYC minimum wage equivalent)</li>
            <li>â€¢ "Affected by delays" includes students reporting weekly commute delays of 10+ minutes</li>
            <li>â€¢ Impact level based on percentage of students affected and delay severity</li>
            <li>â€¢ Priority routes identified through violation analysis and student survey data</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Student Outcomes Analysis -->
    <section id="student-outcomes" class="py-16 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">
            Projected Student Outcomes
          </h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Comprehensive analysis of how improved transit reliability translates
            to measurable improvements in academic and personal outcomes.
          </p>
        </div>

        <div class="space-y-12">
          {studentOutcomes.map((category) => (
            <div key={category.category}>
              <h3 class="text-2xl font-semibold text-gray-900 mb-8 text-center">
                {category.category}
              </h3>
              <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                {category.outcomes.map((outcome) => (
                  <Card variant="elevated" key={outcome.metric} className="text-center">
                    <h4 class="font-semibold text-gray-900 mb-4">{outcome.metric}</h4>
                    <div class="space-y-2 mb-4">
                      <div class="text-sm text-gray-600">Current: <span class="font-semibold">{outcome.current}</span></div>
                      <div class="text-sm text-gray-600">Projected: <span class="font-semibold text-blue-600">{outcome.projected}</span></div>
                    </div>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                      <div class="text-lg font-bold text-green-600">{outcome.improvement}</div>
                      <div class="text-xs text-green-700">improvement</div>
                    </div>
                  </Card>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Educational Equity Focus -->
    <section class="py-16 bg-indigo-900 text-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold mb-4">Advancing Educational Equity</h2>
          <p class="text-xl text-indigo-200 max-w-3xl mx-auto">
            ClearLane specifically addresses transportation barriers that disproportionately
            affect students from underserved communities.
          </p>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
          {equityImpacts.map((impact) => (
            <div key={impact.title} class="bg-white/10 backdrop-blur-sm rounded-xl p-8">
              <h3 class="text-2xl font-semibold mb-4">{impact.title}</h3>
              <div class="space-y-4">
                <div>
                  <h4 class="font-semibold text-indigo-200 mb-2">Current Challenge:</h4>
                  <p class="text-indigo-100">{impact.description}</p>
                </div>
                <div>
                  <h4 class="font-semibold text-indigo-200 mb-2">ClearLane Solution:</h4>
                  <p class="text-indigo-100">{impact.solution}</p>
                </div>
                <div class="bg-green-900/30 rounded-lg p-4">
                  <h4 class="font-semibold text-green-200 mb-2">Equity Benefit:</h4>
                  <p class="text-green-100">{impact.benefit}</p>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Student Voices -->
    <section class="py-16 bg-gray-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-4">Student Voices</h2>
          <p class="text-xl text-gray-600">
            Real experiences from CUNY students affected by bus delays
          </p>
        </div>

        <div class="space-y-8">
          <Card variant="elevated" className="p-8">
            <blockquote class="text-lg text-gray-700 mb-4">
              "My BxM10 commute from the Bronx to Baruch is when I get my best studying done.
              When the bus is delayed, I don't just lose travel timeâ€”I lose my most productive hours of the day."
            </blockquote>
            <cite class="text-gray-600">â€” Maria S., Baruch College, Business Administration</cite>
          </Card>

          <Card variant="elevated" className="p-8">
            <blockquote class="text-lg text-gray-700 mb-4">
              "I work nights and take morning classes. When buses run late, I miss work or miss class.
              There's no good choice, and I can't afford alternatives like Uber every day."
            </blockquote>
            <cite class="text-gray-600">â€” James T., Brooklyn College, Engineering</cite>
          </Card>

          <Card variant="elevated" className="p-8">
            <blockquote class="text-lg text-gray-700 mb-4">
              "As a first-generation college student, I planned my entire schedule around bus reliability.
              When that fails, everything falls apartâ€”my study time, my work schedule, my confidence."
            </blockquote>
            <cite class="text-gray-600">â€” Sarah M., City College, Education</cite>
          </Card>
        </div>
      </div>
    </section>

    <!-- Next Steps for CUNY -->
    <section class="py-16 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Partnership Opportunities</h2>
        <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
          CUNY can play a crucial role in advocating for and implementing ClearLane
          to protect the academic success of 150,000+ students.
        </p>

        <div class="grid md:grid-cols-2 gap-8 mb-12">
          <div class="bg-blue-50 rounded-xl p-6 border border-blue-200">
            <div class="text-3xl mb-4">ðŸ“Š</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Research Partnership</h3>
            <p class="text-gray-600 text-sm mb-4">
              Collaborate on longitudinal studies measuring academic outcomes and student success metrics
            </p>
            <Button href="/contact?request=research-partnership&stakeholder=cuny" variant="outline" size="sm" className="w-full">
              Explore Partnership
            </Button>
          </div>

          <div class="bg-green-50 rounded-xl p-6 border border-green-200">
            <div class="text-3xl mb-4">ðŸŽ¤</div>
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Advocacy Support</h3>
            <p class="text-gray-600 text-sm mb-4">
              Joint advocacy with MTA and city officials to prioritize student transit needs
            </p>
            <Button href="/contact?request=advocacy-support&stakeholder=cuny" variant="outline" size="sm" className="w-full">
              Join Advocacy
            </Button>
          </div>
        </div>

        <div class="bg-gray-50 rounded-xl p-8">
          <h3 class="text-xl font-semibold text-gray-900 mb-4">Supporting Student Success</h3>
          <p class="text-gray-600 mb-6">
            ClearLane represents a unique opportunity to address systemic barriers to educational access
            that affect CUNY students across all campuses and programs.
          </p>

          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <Button href="/deployment-simulator?focus=cuny" variant="primary" size="lg">
              ðŸ“ˆ View Campus-Specific Analysis
            </Button>
            <Button href="/policy-brief" variant="secondary" size="lg">
              ðŸ“‹ Download Educational Impact Brief
            </Button>
            <Button href="/contact" variant="outline" size="lg">
              ðŸ’¬ Discuss Partnership
            </Button>
          </div>
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Track CUNY stakeholder engagement
    if (typeof gtag !== 'undefined') {
      gtag('event', 'stakeholder_page_view', {
        stakeholder: 'cuny',
        engagement_type: 'student_focused_content',
        content_focus: 'academic_outcomes'
      });
    }

    // Track campus analysis table interactions
    const campusRows = document.querySelectorAll('tbody tr');
    campusRows.forEach((row, index) => {
      row.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'campus_analysis_view', {
            stakeholder: 'cuny',
            campus_index: index,
            engagement_type: 'data_exploration'
          });
        }
      });
    });

    // Track student outcome metric interest
    const outcomeCards = document.querySelectorAll('[data-outcome-metric]');
    outcomeCards.forEach(card => {
      card.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'student_outcome_interest', {
            stakeholder: 'cuny',
            metric: card.dataset.outcomeMetric,
            engagement_depth: 'detailed_analysis'
          });
        }
      });
    });

    // Track equity section engagement
    const equitySection = document.querySelector('#equity-impacts');
    if (equitySection) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && typeof gtag !== 'undefined') {
            gtag('event', 'educational_equity_focus', {
              stakeholder: 'cuny',
              engagement_type: 'equity_interest',
              scroll_depth: 'equity_section'
            });
          }
        });
      }, { threshold: 0.3 });

      observer.observe(equitySection);
    }

    // Track partnership CTA clicks
    const partnershipButtons = document.querySelectorAll('a[href*="partnership"]');
    partnershipButtons.forEach(button => {
      button.addEventListener('click', () => {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'partnership_interest', {
            stakeholder: 'cuny',
            partnership_type: button.textContent?.trim().toLowerCase(),
            conversion_intent: 'high'
          });
        }
      });
    });
  });
</script>

<style>
  /* CUNY brand-aligned styling */
  .hero.variant-cuny {
    background: linear-gradient(135deg, #003366 0%, #0066cc 100%);
  }

  /* Enhanced table styling */
  .campus-analysis-table {
    font-size: 0.875rem;
  }

  .campus-analysis-table tbody tr:hover {
    background-color: #f8fafc;
    transform: scale(1.01);
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  /* Impact level indicators */
  .impact-very-high {
    background-color: #fee2e2;
    color: #991b1b;
  }

  .impact-high {
    background-color: #fed7aa;
    color: #c2410c;
  }

  .impact-moderate {
    background-color: #fef3c7;
    color: #a16207;
  }

  /* Print optimization for academic reports */
  @media print {
    .student-outcomes-section {
      page-break-inside: avoid;
    }

    .campus-analysis-table {
      font-size: 0.75rem;
    }

    .equity-impact {
      page-break-inside: avoid;
      margin-bottom: 1rem;
    }
  }
</style>